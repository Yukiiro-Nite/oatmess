<html>
  <head>
    <title>Oatmess</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="/socket.io.js"></script>
    <script src="utils.js"></script>
    <script src="entityUtils.js"></script>
    <script src="components/grabbable.js"></script>
    <script src="components/grabbing.js"></script>
    <script src="components/networked-player.js"></script>
    <script src="components/physics-server.js"></script>
    <script src="components/button.js"></script>
    <script src="components/reset-room.js"></script>
  </head>
  <body>
    <a-scene
      cursor="rayOrigin: mouse"
      raycaster="interval: 10; objects: [visible=true] [button], .grabbable"
      networked-player
      physics-server
    >
      <a-sky color="#16161d"></a-sky>
      <a-assets>
        <a-mixin
          id="buttonStyle"
          animation__click="property: object3D.position.z; from: 0; to: -0.02; dur: 200; startEvents: click;"
          animation__afterclick="property: object3D.position.z; from: -0.02; to: 0; dur: 200; startEvents: animationcomplete__click;"
        ></a-mixin>
      </a-assets>
      <a-plane width="10" height="10" rotation="-90 0 0" material="color:#fed6c1"></a-plane>

      <a-entity
        position="0 1.4 -0.4"
        visible="true"
      >
        <a-box
          width="0.4"
          height="0.1"
          depth="0.02"
          color="#16161d"
          button=""
          reset-room="on: click;"
          mixin="buttonStyle"
        >
          <a-text
            position="0 0 0.015"
            width="1.25"
            align="center"
            color="#fffafe"
            value="Reset Room"
          ></a-text>
        </a-box>
      </a-entity>
      
      <a-entity id="playerRig">
        <a-entity
          id="camera"
          camera="active: true"
          look-controls
          wasd-controls
          position="0 1.6 0"
        ></a-entity>
        <a-entity
          id="leftHand"
          hand-controls="hand: left; handModelStyle: lowPoly; color: #ffcccc"
          cursor="downEvents: pressStart; upEvents: pressEnd;"
          raycaster="objects: [visible=true] [button]; origin: -0.02, 0.0425, -0.09; direction: 0.1, 0, 0; far: 0.1; interval: 30; showLine: true;"
          grabbing="objects: .grabbable"
        ></a-entity>
        <a-entity
          id="rightHand"
          hand-controls="hand: right; handModelStyle: lowPoly; color: #ffcccc"
          cursor="downEvents: pressStart; upEvents: pressEnd;"
          raycaster="objects: [visible=true] [button]; origin: 0.02, 0.0425, -0.09; direction: -0.1, 0, 0; far: 0.1; interval: 30; showLine: true;"
          grabbing="objects: .grabbable"
        ></a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>